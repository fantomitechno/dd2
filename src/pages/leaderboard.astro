---
import GlobalLayout from "../layouts/GlobalLayout.astro";
import PageHeader from "../components/PageHeader.astro";
import LeaderboardPage from "../components/deepdip/LeaderboardPage.astro";
import { getLeaderboardSize } from "../utils/api";

const page = parseInt(Astro.url.searchParams.get("page") ?? "0");
const leaderboardSize = await getLeaderboardSize();
---

<GlobalLayout title="leaderboard | DD2">
  <PageHeader>Leaderboard</PageHeader>

  <LeaderboardPage page={page} />
  <div class="spacer"></div>

  <span>
    {page > 0 && <a href={"/leaderboard?page=0"}>{"<<-"}</a>}
    {page > 0 && <a href={"/leaderboard?page=" + (page - 1)}>{"<--"}</a>}
    {
      page < leaderboardSize.pages - 1 && (
        <a href={"/leaderboard?page=" + (page + 1)}>{"-->"}</a>
      )
    }
    {
      page < leaderboardSize.pages - 1 && (
        <a href={"/leaderboard?page=" + (leaderboardSize.pages - 1)}>{"->>"}</a>
      )
    }
  </span>
</GlobalLayout>
